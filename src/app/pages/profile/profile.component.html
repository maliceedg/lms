<div class="relative course-banner">
  <h1 class="profile-title fw-bold">
    Perfil
  </h1>
</div>

<div class="bg-gray h-100">
  <div class="container py-5 profile">

    <!-- New user -->
    <div *ngIf="newUser" class="d-flex flex-column justify-content-center text-center pt-3 mx-auto">
      <i class="pi pi-exclamation-circle exclamation"></i>
      <span class="mt-3">Estimado usuario,</span>
      <h4>Necesitas actualizar tu información personal</h4>
      <button pButton pRipple (click)="showDialog()" type="button" label="Actualizar" class="mt-3 mx-auto"></button>
    </div>

    <div *ngIf="!newUser" class="rounded shadow bg-white p-3 d-flex flex-column justify-content-center">
      <div class="text-center pt-3">
        <img [src]="userInfo?.photoURL" class="profile-pic mx-auto shadow" alt="{{userInfo.displayName}}">
        <h3 class="mt-3">{{userInfo?.displayName}}</h3>
        <h6>{{userInfo?.email}}</h6>
        <h6>{{userInfo?.phoneNumber}}</h6>
        <button pButton pRipple (click)="showDialog()" type="button" label="Actualizar" class="mt-3 mx-auto"></button>
      </div>
    </div>

  </div>
</div>

<!-- Dialog -->
<p-dialog header="Información Básica" [(visible)]="display" [modal]="true" [breakpoints]="{'960px': '75vw'}"
  [style]="{width: '50vw'}" [draggable]="false" [resizable]="false">

  <div class="d-flex flex-column relative">

    <!-- <div *ngIf="loading" class="absolute d-flex h-100 w-100">
      <i class="pi pi-spin pi-spinner m-auto" style="font-size: 2rem"></i>
    </div> -->

    <form [formGroup]="updateInfo">
      <div class="d-flex align-items-center basic-info">
        <div class="p-inputgroup d-flex">
          <span class="p-inputgroup-addon"><i class="pi pi-user"></i></span>
          <input type="text" pInputText placeholder="Nombre" formControlName="name">
        </div>

        <div class="p-inputgroup d-flex">
          <span class="p-inputgroup-addon"><i class="pi pi-phone"></i></span>
          <input type="text" pInputText placeholder="Teléfono" formControlName="phone">
        </div>
      </div>

      <div class="p-inputgroup d-flex mt-3">
        <span class="p-inputgroup-addon"><i class="pi pi-user"></i></span>
        <input type="text" pInputText class="w-100" placeholder="Profesión">
      </div>

      <div class="p-inputgroup d-flex mt-3">
        <input type="file" (change)="onFileSelected($event)" accept=".png,.jpg,.jpeg">
        <!-- <p-fileUpload class="w-100" name="img[]" #photoURL accept="image/*" (change)="onFileSelected($event)"
          accept=".png,.jpg" [maxFileSize]="1000000" chooseLabel="Elegir" uploadLabel="Subir" cancelLabel="Cancelar">
          <ng-template pTemplate="content">
            <ul *ngIf="uploadedFiles.length">
              <li *ngFor="let file of uploadedFiles">{{file.name}} - {{file.size}} bytes</li>
            </ul>
          </ng-template>
        </p-fileUpload> -->
      </div>
    </form>
    <div *ngIf="!loading">
    </div>
  </div>

  <ng-template pTemplate="footer">
    <p-button (click)="updateProfile(); display=false" label="Enviar" styleClass="p-button-text"></p-button>
  </ng-template>
</p-dialog>